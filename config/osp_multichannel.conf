# This config file demonstrates the usage of mixers.
# First, two mixers are defined:
#
# - mixer1: sends the mixed stream to Icecast and saves it to a file
# - mixer2: sends the mixed stream to Icecast
#
# Two dongles are used, both in AM, multichannel mode:
#
# - dongle 1: 3 channels:
#   - channel 1 goes to mixer1 (center, volume decreased to 30%)
#   - channel 2 goes to mixer1 (full left)
#   - channel 3 goes to mixer2 (85% right)
#
# - dongle 2: 2 channels:
#   - channel 1 goes to mixer1 (full right)
#   - channel 2 goes to mixer2 (85% left, volume set to 200%)
#
# Refer to https://github.com/szpajder/RTLSDR-Airband/wiki
# for description of keywords and config syntax.
mixers: {
  mixer1: {
    outputs: (
        {
	  type = "pulse";
          stream_name = "test";
#	  type = "icecast";
#	  server = "127.0.0.1";
#          port = 6010;
#          mountpoint = "osp.mp3";
#          name = "nasluch"
#          genre = "ATC";
#          username = "source";
#          password = "12345678";
	}
    )
  }
};

fft_size = 512;
# tau = 300;

devices:
({
  modulation = "nfm";
  type = "soapysdr";
  device_string = "driver=airspy,device_id=0,biastee=true";
# channel = 0;
  gain = "LNA=8,MIX=8,VGA=15";
# correction = 0.0;
# antenna = "";
  mode = "multichannel";
  sample_rate = 3.00;
  centerfreq = 149.6;
  channels:
  (
    {
      freq = 148.7;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg1";
	}
      );
    },
    {
      freq = 149.0875;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg2";
	}
      );
    },
    {
      freq = 149.1375;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg3";
	}
      );
    },
    {
      freq = 149.1625;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg4";
	}
      );
    },
    {
      freq = 149.225;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg5";
	}
      );
    },
    {
      freq = 149.2375;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg6";
	}
      );
    },
    {
      freq = 149.2625;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg7";
	}
      );
    },
    {
      freq = 149.275;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg8";
	}
      );
    },
    {
      freq = 149.625;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "motoshadow";
	}
      );
    },
    {
      freq = 149.6375;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "moto";
	}
      );
    },
    {
      freq = 149.9;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "hems";
	}
      );
    }
  );
 }
);

