# This config file demonstrates the usage of mixers.
# First, two mixers are defined:
#
# - mixer1: sends the mixed stream to Icecast and saves it to a file
# - mixer2: sends the mixed stream to Icecast
#
# Two dongles are used, both in AM, multichannel mode:
#
# - dongle 1: 3 channels:
#   - channel 1 goes to mixer1 (center, volume decreased to 30%)
#   - channel 2 goes to mixer1 (full left)
#   - channel 3 goes to mixer2 (85% right)
#
# - dongle 2: 2 channels:
#   - channel 1 goes to mixer1 (full right)
#   - channel 2 goes to mixer2 (85% left, volume set to 200%)
#
# Refer to https://github.com/szpajder/RTLSDR-Airband/wiki
# for description of keywords and config syntax.
mixers: {
  mixer1: {
    outputs: (
        {
	  type = "icecast";
	  server = "127.0.0.1";
          port = 6010;
          mountpoint = "osp.mp3";
          name = "nasluch"
          genre = "ATC";
          username = "source";
          password = "12345678";
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/nieciagly";
	  filename_template = "nasluch_przerywany";
	},
	{
          type= "pulse";
          stream_name = "nasluch";
          sink= "fifo_output"
	  continuous = false;
        },
        {
          type = "file";
	  directory = "/home/jacek/nasluch/ciagly";
          filename_template = "nasluch_ciagly";
	  continuous = true;
        }

    )
  }
};

fft_size = 512;
# tau = 300;

devices:
({
  type = "soapysdr";
  device_string = "driver=airspy,device_id=0,biastee=true";  
  gain = "LNA=5,MIX=14,VGA=12";
  centerfreq = 149993750;
  # centerfreq = "148846875";
  sample_rate = 3.0;
  modulation = "nfm";
  channels:
  (
    {
      freq = 149.0;
      # afc = 1;
      # squelch = 80;
      modulation = "nfm";
      outputs: (
	{
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
        {
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krajowy";
	}
      );
    },
    {
      freq = 148.825;
      # afc = 1;
      # squelch = 80;
      modulation = "nfm";
      outputs: (
	{
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_syrena_rx";
	}
      );
    },
#    {
#      freq = 148.875;
#      # afc = 1;
#      # squelch = 80;
#      modulation = "nfm";
#      outputs: (
#	{
#	  type = "mixer";
#	  name = "mixer1";
#	  ampfactor = 2.0;
#	},
#	{
#	  type = "file";
#	  directory = "/home/jacek/nasluch/kanaly";
#	  filename_template = "psp_operacyjny1";
#	}
#      );
#    },
#    {
#      freq = 149.3125;
#      # afc = 1;
#      # squelch = 80;
#      modulation = "nfm";
#      outputs: (
#	{
#	  type = "mixer";
#	  name = "mixer1";
#	  ampfactor = 2.0;
#	},
#	{
#	  type = "file";
#	  directory = "/home/jacek/nasluch/kanaly";
#	  filename_template = "psp_operacyjny2";
#	}
#      );
#    },
#    {
#      freq = 148.6875;
#      # afc = 1;
#      # squelch = 80;
#      modulation = "nfm";
#      outputs: (
#	{
#	  type = "mixer";
#	  name = "mixer1";
#	  ampfactor = 2.0;
#	},
#	{
#	  type = "file";
#	  directory = "/home/jacek/nasluch/kanaly";
#	  filename_template = "psp_dowodzenie1";
#	}
#      );
#    },
#    {
#      freq = 149.25;
#      # afc = 1;
#      # squelch = 80;
#      modulation = "nfm";
#      outputs: (
#	{
#	  type = "mixer";
#	  name = "mixer1";
#	  ampfactor = 2.0;
#	},
#	{
#	  type = "file";
#	  directory = "/home/jacek/nasluch/kanaly";
#	  filename_template = "psp_dowodzenie2";
#	}
#      );
#    },
    {
      freq = 148.8;
      # afc = 1;
      # squelch = 80;
      modulation = "nfm";
      outputs: (
	{
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
          priority = "true";
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_rawa";
	}
      );
    },
    {
      freq = "149112500";
      # afc = 1;
      modulation = "nfm";
      # squelch = 80;
      outputs: (
	{
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
          balance = -1.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_skierniewice";
	}
      );
    },
    {
      freq = 149.1875;
      # afc = 1;
      # squelch = 80;
      modulation = "nfm";
      outputs: (
	{
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
          balance = -1.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_tomaszow";
	}
      );
    },
#     {
#       freq = 149.9625;
#       afc = 1;
#       # squelch = 80;
#       modulation = "nfm";
#       outputs: (
# 	{
# 	  type = "mixer";
# 	  name = "mixer1";
# 	  ampfactor = 2.0;
#           balance = -1.0;
# 	},
# 	{
# 	  type = "file";
# 	  directory = "/home/jacek/nasluch/kanaly";
# 	  filename_template = "psp_piotrkow";
# 	}
#       );
#     },
#    {
#      freq = 148.775;
#      # afc = 1;
#      # squelch = 80;
#      modulation = "nfm";
#      outputs: (
#	{
#	  type = "mixer";
#	  name = "mixer1";
#	  ampfactor = 2.0;
#          balance = 1.0;
#	},
#	{
#	  type = "file";
#	  directory = "/home/jacek/nasluch/kanaly";
#	  filename_template = "psp_lodz";
#	}
#      );
#    },
#    {
#      freq = 148.975;
#      # afc = 1;
#      # squelch = 80;
#      modulation = "nfm";
#      outputs: (
#	{
#	  type = "mixer";
#	  name = "mixer1";
#	  ampfactor = 2.0;
#          balance = 1.0;
#	},
#	{
#	  type = "file";
#	  directory = "/home/jacek/nasluch/kanaly";
#	  filename_template = "psp_lodz_wsch_konskie";
#	}
#      );
#    },
    {
      freq = 149.3;
      # afc = 1;
      # squelch = 80;
      modulation = "nfm";
      outputs: (
	{
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
          balance = -1.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_opoczno";
	}
      );
    },
    {
      freq = 148.7625;
      # afc = 1;
      # squelch = 80;
      modulation = "nfm";
      outputs: (
	{
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
          balance = -1.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_przysucha";
	}
      );
    },
    {
      freq = 149.2125;
      # afc = 1;
      # squelch = 80;
      modulation = "nfm";
      outputs: (
	{
	  type = "mixer";
	  name = "mixer1";
          balance = -1.0;
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_brzeziny";
	}
      );
    },
#    {
#      freq = 149.2;
#      # afc = 1;
#      # squelch = 80;
#      modulation = "nfm";
#      outputs: (
#	{
#	  type = "mixer";
#	  name = "mixer1";
#	  ampfactor = 2.0;
#          balance = -1.0;
#	},
#	{
#	  type = "file";
#	  directory = "/home/jacek/nasluch/kanaly";
#	  filename_template = "psp_lowicz";
#	}
#      );
#    },
    {
      freq = "149287500";
      # afc = 1;
      modulation = "nfm";
      outputs: (
	{
	  type = "mixer";
	  name = "mixer1";
	  balance = -1.0;
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_grojec";
	}
      );
    },
    {
      freq = 148.9375;
      # afc = 1;
      modulation = "nfm";
      outputs: (
#        {
#	  type = "mixer";
#	  name = "mixer1";
#	  ampfactor = 2.0;
#	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_pruszkow_star";
	}
      );
    },
    {
      freq = 148.7;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg1";
	}
      );
    },
    {
      freq = 149.0875;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg2";
	}
      );
    },
    {
      freq = 149.1375;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg3";
	}
      );
    },
    {
      freq = 149.1625;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg4";
	}
      );
    },
    {
      freq = 149.225;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg5";
	}
      );
    },
    {
      freq = 149.2375;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg6";
	}
      );
    },
    {
      freq = 149.2625;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg7";
	}
      );
    },
    {
      freq = 149.275;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "psp_krg8";
	}
      );
    },
    {
      freq = 149.9;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "hems";
	}
      );
    },
    {
      freq = 150.15;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "PKP2";
	}
      );
    },
    {
      freq = 150.1;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "PKP_CMK";
	}
      );
    },
    {
      freq = 149.2125;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "SGSP";
	}
      );
    },
    {
      freq = 148.9625;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "Warszawa";
	}
      );
    },
    {
      freq = 148.9;
      # afc = 1;
      modulation = "nfm";
      outputs: (
        {
	  type = "mixer";
	  name = "mixer1";
	  ampfactor = 2.0;
	},
	{
	  type = "file";
	  directory = "/home/jacek/nasluch/kanaly";
	  filename_template = "Warszawa_Z";
	}
      );
    }
  );
 }
);

